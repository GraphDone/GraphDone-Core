@tailwind base;
@tailwind components;
@tailwind utilities;

/* Professional dropdown animation */
@keyframes fadeInScale {
  from {
    opacity: 0;
    transform: translateX(-50%) translateY(-5px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateX(-50%) translateY(0) scale(1);
  }
}

@layer base {
  html {
    font-family: 'Inter', system-ui, sans-serif;
    scroll-behavior: smooth;
  }
  
  body {
    @apply bg-gray-900 text-gray-100;
  }

  /* Custom scrollbar */
  ::-webkit-scrollbar {
    width: 8px;
  }

  ::-webkit-scrollbar-track {
    background: #374151;
  }

  ::-webkit-scrollbar-thumb {
    background: #6B7280;
    border-radius: 4px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: #9CA3AF;
  }
}

@layer components {
  .btn {
    @apply px-4 py-2 rounded-lg font-medium transition-colors;
  }
  
  .btn-primary {
    @apply bg-green-600 text-white hover:bg-green-700 border border-green-500/30;
  }
  
  .btn-secondary {
    @apply bg-gray-700 text-gray-300 hover:bg-gray-600 border border-gray-600;
  }
  
  .card {
    @apply bg-white rounded-lg border border-gray-200 shadow-sm;
  }

  /* Text wrapping in table cells while preserving original table size */
  .table-text-content {
    word-wrap: break-word;
    overflow-wrap: break-word;
    word-break: break-word;
    white-space: normal;
    hyphens: auto;
    max-width: 300px; /* Reasonable width constraint for text wrapping */
  }
}

/* Graph visualization styles */
.graph-container {
  @apply w-full h-full overflow-hidden;
}

.node {
  @apply cursor-pointer transition-all duration-200;
}

/* Selected node stays solid and visible */
.node-selected {
  opacity: 1 !important;
  stroke-width: 2.5 !important;
  filter: drop-shadow(0 0 8px currentColor);
}

/* Expanding ring animation */
.expanding-ring {
  animation: ring-expand 1.5s ease-out infinite;
  transform-origin: center;
  pointer-events: none;
}

@keyframes ring-expand {
  0% {
    r: 20;
    stroke-opacity: 0.6;
    stroke-width: 3;
  }
  100% {
    r: 40;
    stroke-opacity: 0;
    stroke-width: 1;
    filter: blur(2px);
  }
}

/* Pulsing green indicator for active dialogs - much more aggressive */
.dialog-active-pulse {
  animation: pulse-green 1.0s ease-in-out infinite !important;
  stroke: #10b981 !important;
  stroke-width: 6 !important;
  filter: drop-shadow(0 0 20px #10b981) drop-shadow(0 0 40px #10b981) !important;
}

@keyframes pulse-green {
  0%, 100% {
    stroke: #10b981 !important;
    stroke-width: 6 !important;
    stroke-opacity: 1 !important;
    filter: drop-shadow(0 0 20px #10b981) drop-shadow(0 0 40px #10b981) !important;
  }
  50% {
    stroke: #34d399 !important;
    stroke-width: 8 !important;
    stroke-opacity: 1 !important;
    filter: drop-shadow(0 0 30px #34d399) drop-shadow(0 0 60px #34d399) !important;
  }
}

/* Force the glow on any SVG element with the pulse class */
svg .dialog-active-pulse,
.dialog-active-pulse {
  animation: pulse-green 1.0s ease-in-out infinite !important;
  stroke: #10b981 !important;
  stroke-width: 6 !important;
  filter: drop-shadow(0 0 20px #10b981) drop-shadow(0 0 40px #10b981) !important;
}

/* More specific targeting for SVG elements in the graph */
.graph-container svg .dialog-active-pulse {
  stroke: #10b981 !important;
  stroke-width: 6 !important;
  filter: drop-shadow(0 0 20px #10b981) drop-shadow(0 0 40px #10b981) !important;
  animation: pulse-green 1.0s ease-in-out infinite !important;
}

.node:hover circle {
  filter: drop-shadow(0 0 6px currentColor);
  stroke-width: 2.5;
  transform: scale(1.05);
  transition: all 0.2s ease-in-out;
}

/* Style for completed nodes */
.node .completion-indicator {
  filter: drop-shadow(0 0 3px rgba(16, 185, 129, 0.5));
}

/* Text in completed nodes should be slightly dimmed */
.node text {
  transition: opacity 0.3s ease;
}

.node-circle {
  @apply stroke-2 stroke-current;
}

.node-text {
  @apply text-xs font-medium text-center pointer-events-none text-white;
}

.node-label-bright {
  fill: #ffffff !important;
  color: #ffffff !important;
}

/* Force all SVG text in graph visualization to be white - but NOT completion indicators */
.graph-container text:not(.completion-indicator) {
  fill: #ffffff !important;
  color: #ffffff !important;
}

.graph-container svg text:not(.completion-indicator) {
  fill: #ffffff !important;
  color: #ffffff !important;
}

/* Specifically target node labels */
svg text.node-label-bright {
  fill: #ffffff !important;
  color: #ffffff !important;
  stroke: #000000 !important;
  stroke-width: 3px !important;
}

/* Override any potential Tailwind text color classes - but NOT completion indicators */
.graph-container svg text:not(.completion-indicator),
.graph-container text:not(.completion-indicator) {
  @apply !text-white;
  fill: #ffffff !important;
  color: #ffffff !important;
}

/* Force all text in SVG to be white - but NOT completion indicators */
svg text:not(.completion-indicator) {
  fill: #ffffff !important;
  color: #ffffff !important;
}

/* Force text elements to be white - but NOT completion indicators */
* text:not(.completion-indicator) {
  fill: #ffffff !important;
  color: #ffffff !important;
}

/* HTML node labels - guaranteed white text */
.node-labels-container .node-label {
  color: #ffffff !important;
  text-shadow: 2px 2px 4px rgba(0,0,0,0.8) !important;
  font-weight: 700 !important;
}

.edge {
  @apply stroke-current opacity-60;
}

.edge-dependency {
  @apply stroke-blue-500;
}

.edge-blocks {
  @apply stroke-red-500;
}

.edge-relates {
  @apply stroke-gray-400;
}

/* Priority indicator styles */
.priority-high {
  @apply text-red-600;
}

.priority-medium {
  @apply text-yellow-600;
}

.priority-low {
  @apply text-green-600;
}

/* Dark theme date picker styling */
input[type="date"] {
  color-scheme: dark;
}

/* WebKit/Chromium browsers */
input[type="date"]::-webkit-calendar-picker-indicator {
  background-color: #374151;
  border-radius: 4px;
  border: 1px solid #4b5563;
  padding: 2px;
  cursor: pointer;
  filter: invert(1);
}

input[type="date"]::-webkit-calendar-picker-indicator:hover {
  background-color: #4b5563;
  border-color: #6b7280;
}

/* Firefox */
input[type="date"]::-moz-calendar-picker-indicator {
  background-color: #374151;
  border-radius: 4px;
  border: 1px solid #4b5563;
  padding: 2px;
  cursor: pointer;
}

/* Dark theme for the actual calendar popup */
@supports (color-scheme: dark) {
  input[type="date"] {
    color-scheme: dark;
  }
}

/* Force dark theme on date inputs in dark mode */
.dark input[type="date"],
html.dark input[type="date"],
input[type="date"].dark-theme {
  color-scheme: dark;
  background-color: #374151;
  border-color: #4b5563;
  color: #f9fafb;
}

/* Additional styling for better contrast */
input[type="date"]:focus {
  color-scheme: dark;
}

/* Right slider animation */
@keyframes slide-in-right {
  0% {
    transform: translateX(100%);
    opacity: 0;
  }
  100% {
    transform: translateX(0);
    opacity: 1;
  }
}

.animate-slide-in-right {
  animation: slide-in-right 0.3s ease-out;
}